(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{19324:()=>{},50395:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>d});var i=r(95155),a=r(12115),o=r(16203),n=r(35317),s=r(98915);let l=(0,a.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,a.useState)(null),[u,c]=(0,a.useState)(!0),[h,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!s.j2){console.error("Firebase auth is not initialized"),c(!1);return}let e=(0,o.hg)(s.j2,async e=>{try{if(e){if(!s.db){console.error("Firebase db is not initialized"),c(!1);return}let t=await (0,n.x7)((0,n.H9)(s.db,"users",e.uid));if(t.exists()){let r=t.data();d({uid:e.uid,email:e.email,displayName:e.displayName,isVerified:e.emailVerified,role:r.role||"user",createdAt:r.createdAt?new Date(r.createdAt.toDate()):null,updatedAt:r.updatedAt?new Date(r.updatedAt.toDate()):null,walletAddress:r.walletAddress,campaignsCreated:r.campaignsCreated,donationsCount:r.donationsCount,totalDonated:r.totalDonated,totalRaised:r.totalRaised})}else{let t={uid:e.uid,email:e.email,displayName:e.displayName,isVerified:e.emailVerified,role:"user",createdAt:new Date,updatedAt:new Date};await (0,n.BN)((0,n.H9)(s.db,"users",e.uid),t),d(t)}}else d(null)}catch(e){console.error("Error in auth state change:",e),w("Failed to load user data"),d(null)}finally{c(!1)}});return()=>e()},[]);let m=async(e,t,r)=>{if(!s.j2||!s.db)throw Error("Firebase is not initialized");try{c(!0),w(null);let i=await (0,o.eJ)(s.j2,e,t);await (0,o.r7)(i.user,{displayName:r}),await (0,n.BN)((0,n.H9)(s.db,"users",i.user.uid),{uid:i.user.uid,email:e,displayName:r,isVerified:!1,role:"user",createdAt:new Date,updatedAt:new Date}),await (0,o.gA)(i.user)}catch(e){throw console.error("Sign up error:",e),w(e.message),e}finally{c(!1)}},f=async(e,t)=>{if(!s.j2)throw Error("Firebase auth is not initialized");try{c(!0),w(null),await (0,o.x9)(s.j2,e,t)}catch(e){throw console.error("Sign in error:",e),w(e.message),e}finally{c(!1)}},v=async()=>{if(!s.j2)throw Error("Firebase auth is not initialized");try{c(!0),w(null),await (0,o.CI)(s.j2)}catch(e){throw console.error("Sign out error:",e),w(e.message),e}finally{c(!1)}},E=async()=>{if(!s.j2||!s.j2.currentUser)throw Error("No user is currently signed in");try{await (0,o.gA)(s.j2.currentUser)}catch(e){throw console.error("Email verification error:",e),e}},b=async e=>{if(!s.j2)throw Error("Firebase auth is not initialized");try{await (0,o.J1)(s.j2,e)}catch(e){throw console.error("Password reset error:",e),e}},j=async e=>{if(!s.j2||!s.j2.currentUser||!s.db)throw Error("Firebase is not initialized or no user is signed in");try{await (0,o.r7)(s.j2.currentUser,{displayName:e}),await (0,n.mZ)((0,n.H9)(s.db,"users",s.j2.currentUser.uid),{displayName:e,updatedAt:new Date}),r&&d({...r,displayName:e})}catch(e){throw console.error("Profile update error:",e),e}};return(0,i.jsx)(l.Provider,{value:{user:r,loading:u,error:h,signUp:m,signIn:f,signOut:v,sendEmailVerification:E,sendPasswordReset:b,updateUserProfile:j},children:t})}function u(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},53661:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,19324,23)),Promise.resolve().then(r.bind(r,70462)),Promise.resolve().then(r.bind(r,50395)),Promise.resolve().then(r.t.bind(r,65299,23))},65299:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},70462:(e,t,r)=>{"use strict";r.d(t,{DebugFirebase:()=>n});var i=r(95155),a=r(12115),o=r(98915);function n(){let[e,t]=(0,a.useState)({});return((0,a.useEffect)(()=>{(async()=>{try{var e,r,i,a;let n=null===o.j2||void 0===o.j2?void 0:o.j2.currentUser;t({authConnected:!!o.j2,firestoreConnected:!!o.db,currentUser:(null==n?void 0:n.uid)||null,projectId:null===o.j2||void 0===o.j2?void 0:null===(r=o.j2.app)||void 0===r?void 0:null===(e=r.options)||void 0===e?void 0:e.projectId,authDomain:null===o.j2||void 0===o.j2?void 0:null===(a=o.j2.app)||void 0===a?void 0:null===(i=a.options)||void 0===i?void 0:i.authDomain,timestamp:new Date().toISOString()})}catch(e){console.error("Firebase debug error:",e),t({error:e.message,timestamp:new Date().toISOString()})}})()},[]),"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname)?null:(0,i.jsxs)("div",{className:"fixed bottom-4 left-4 bg-black text-white p-3 rounded text-xs max-w-sm z-50",children:[(0,i.jsx)("h4",{className:"font-bold mb-2",children:"Firebase Debug"}),(0,i.jsx)("pre",{className:"text-xs overflow-auto max-h-32",children:JSON.stringify(e,null,2)})]})}},98915:(e,t,r)=>{"use strict";let i,a,o,n;r.d(t,{IG:()=>n,db:()=>o,j2:()=>a});var s=r(23915),l=r(16203),d=r(35317),u=r(90858),c=r(49509);let h={apiKey:c.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:c.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:c.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:c.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:c.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:c.env.NEXT_PUBLIC_FIREBASE_APP_ID};try{i=(0,s.Wp)(h),a=(0,l.xI)(i),o=(0,d.aU)(i),n=(0,u.c7)(i),console.log("Firebase initialized successfully on client")}catch(e){console.error("Failed to initialize Firebase:",e)}}},e=>{var t=t=>e(e.s=t);e.O(0,[2618,2992,5965,3183,8441,1684,7358],()=>t(53661)),_N_E=e.O()}]);